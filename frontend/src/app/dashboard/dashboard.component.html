<div class="d-flex" style="min-height: 100vh; background: white;">
  <!-- Sidebar -->
  <div
    class="d-flex flex-column justify-content-between p-3 text-bg-dark"
    style="width: 280px; height: 100vh;"
  >
    <!-- Upload files & file list -->
    <div>
      <h4 class="mb-4">Uploaded Files</h4>

      <ng-container *ngIf="currentFiles && currentFiles.length; else noFiles">
        <div class="list-group overflow-auto mb-3" style="max-height: 60vh;">
          <a
            *ngFor="let file of currentFiles"
            href="javascript:void(0)"
            class="list-group-item list-group-item-action text-truncate small d-flex justify-content-between align-items-center"
            (click)="previewFile(file)"
          >
            <span class="me-2 text-truncate">{{ file.fileName }}</span>
            <button
              class="btn btn-sm btn-danger"
              style="padding: 0.1rem 0.4rem;"
              (click)="deleteFile(file, $event)"
            >
              &minus;
            </button>
          </a>

        </div>
      </ng-container>

      <ng-template #noFiles>
        <p class="small text-white-50 mb-3">No files attached.</p>
      </ng-template>
    </div>

    <!-- Bottom: VAT info -->
    <div class="text-white-50 small">
      <span (click)="toggleLogoffOptions()" style="cursor: pointer;">Logged in with VAT: {{ vatNumber }}</span>
      <div *ngIf="showLogoffOptions" class="mt-2">
        <button class="btn btn-sm btn-danger" (click)="logoff()">Logoff</button>
      </div>
    </div>
  </div>

  <!-- Main chat panel -->
  <div
    class="flex-grow-1 d-flex flex-column p-4"
    style="overflow-y: auto; height: 100vh;"
  >
    <h1 class="fw-semibold mb-3">üóÇÔ∏è Chats</h1>

    <app-chat-tabs
      [vat]="vatNumber"
      (selectedChat)="onChatSelected($event)"
      (fileAttached)="addFileToSidebar($event)"
    ></app-chat-tabs>

  </div>
</div>
