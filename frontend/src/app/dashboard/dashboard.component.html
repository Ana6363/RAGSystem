<div class="d-flex" style="min-height: 100vh; color: #333;">
  <!-- Sidebar -->
  <div
    class="d-flex flex-column justify-content-between p-3 overflow-hidden"
    style="width: 280px; height: 100vh; background-color: #f5f6fa !important;"
  >
    <div>
      <h3 class="mb-4" style="font-family: 'Poppins', sans-serif; color: #803cf2; margin-top: 40px;">
        Uploaded Files
      </h3>
      
      
      <div class="position-relative text-center mb-3">

        <!-- Horizontal line -->
        <div
        style="height: 1px; background-color: #e7e8ea; width: 100%; position: absolute; top: 159px;"
        ></div>
      
        <!-- Robot image -->
        <img
        *ngIf="currentFiles && currentFiles.length > 0; else noFilesRobot"
        src="assets/images/robotCut.png"
        alt="Robot"
        style="position: absolute; top: 10px; left: 50%; transform: translateX(-50%); height: 250px; object-fit: contain; z-index: 2;"
        />

        <ng-template #noFilesRobot>
        <img
          src="assets/images/robotCutLooking.png"
          alt="No Files Robot"
          style="position: absolute; top: 50px; left: 50%; transform: translateX(-50%); height: 290px; object-fit: contain; z-index: 2;"
        />
        </ng-template>

      </div>
      
      <ng-container *ngIf="currentFiles && currentFiles.length; else noFiles">
        <div class="list-group overflow-auto mb-3" style="max-height: 60vh; margin-top: 260px;">
          <a
            *ngFor="let file of currentFiles"
            href="javascript:void(0)"
            class="list-group-item list-group-item-action text-truncate small d-flex justify-content-between align-items-center"
            (click)="previewFile(file)"
          >
            <span class="me-2 text-truncate filne-name">{{ file.fileName }}</span>
            <button
              class="btn btn-sm"
              style="padding: 0.1rem 0.4rem; background-color: #e57373; border: none; color: white; border-radius: 3px; transition: background-color 0.2s ease;"
              (click)="deleteFile(file, $event)"
              onmouseover="this.style.backgroundColor='#d45252';"
              onmouseout="this.style.backgroundColor='#e57373';"
            >
              &minus;
            </button>
          </a>
        </div>
      </ng-container>

      <ng-template #noFiles>
        <p class="small" style="color: #626466; margin-top: 240px;">No files attached.</p>
      </ng-template>      
    </div>

    <div class="vat-wrapper position-relative">
      <img src="assets/images/user.png" class="vat-avatar" />
      <span class="vat-label"> {{ vatNumber }}</span>
      
      <!-- 3-dot icon to toggle the dropdown -->
      <img
        src="assets/images/3dots.png"
        class="dots-icon"
        (click)="toggleDropdown()"
        alt="Options"
      />
    
      <!-- Dropdown menu -->
      <div *ngIf="dropdownVisible" class="dropdown-menu-custom">
        <button (click)="logoff()" class="dropdown-item d-flex align-items-center gap-2">
          <img src="assets/images/logout.png" alt="Logout" style="width: 16px; height: 16px; margin-left: -8px; margin-right: 7px;" />
          <span>Sign Out</span>
        </button>
      </div>
      
    </div>

  </div>

  <!-- Main chat panel -->
  <div
    class="flex-grow-1 d-flex flex-column p-0"
    style="overflow-y: auto; color: #333; background-color: #ffffff;"
  >
    <app-chat-tabs
      [vat]="vatNumber"
      (selectedChat)="onChatSelected($event)"
      (fileAttached)="addFileToSidebar($event)"
    ></app-chat-tabs>
  </div>
</div>
